<html><head><title>Ball Sim 2015</title><link rel="shortcut icon" href="assets/favicons/favicon.ico"><link rel="icon" sizes="16x16 32x32 64x64" href="assets/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="196x196" href="assets/favicons/favicon-196.png"><link rel="icon" type="image/png" sizes="160x160" href="assets/favicons/favicon-160.png"><link rel="icon" type="image/png" sizes="96x96" href="assets/favicons/favicon-96.png"><link rel="icon" type="image/png" sizes="64x64" href="assets/favicons/favicon-64.png"><link rel="icon" type="image/png" sizes="32x32" href="assets/favicons/favicon-32.png"><link rel="icon" type="image/png" sizes="16x16" href="assets/favicons/favicon-16.png"><link rel="apple-touch-icon" sizes="152x152" href="assets/favicons/favicon-152.png"><link rel="apple-touch-icon" sizes="144x144" href="assets/favicons/favicon-144.png"><link rel="apple-touch-icon" sizes="120x120" href="assets/favicons/favicon-120.png"><link rel="apple-touch-icon" sizes="114x114" href="assets/favicons/favicon-114.png"><link rel="apple-touch-icon" sizes="76x76" href="assets/favicons/favicon-76.png"><link rel="apple-touch-icon" sizes="72x72" href="assets/favicons/favicon-72.png"><link rel="apple-touch-icon" href="assets/favicons/favicon-57.png"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="assets/favicons/favicon-144.png"><meta name="msapplication-config" content="assets/favicons/browserconfig.xml"><link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'><script>function distance(e,t,n,r){dX2=Math.pow(n-e,2);dY2=Math.pow(r-t,2);return Math.sqrt(dX2+dY2)}function collision(e,t){space=e.radius+t.radius;if(distance(e.x,e.y,t.x,t.y)<space){return true}else{return false}}function initMenu(){var e=document.createElement("canvas");e.id="menu";document.body.appendChild(e);var t=document.getElementById("menu");currentcanvas="menu";var n=t.getContext("2d");t.width=winwidth;t.height=winheight;var r=[];r.push({color:"green",width:200,height:75,top:winheight/2+50,left:winwidth/2-100});t.addEventListener("click",function(i){var s=t.offsetLeft;var o=t.offsetTop;var u=i.pageX-s;var a=i.pageY-o;r.forEach(function(r){if(a>r.top&&a<r.top+r.height&&u>r.left&&u<r.left+r.width){n.clearRect(0,0,t.width,t.height);document.body.removeChild(e);initGame()}})},false);var i=[];var s=["#2ecc71","#1abc9c","#f39c12","#34495e","#f1c40f","#7f8c8d","#e67e22","#3498db"];var o=function(e){if(e===0){var t=Math.round(Math.random()*winheight);var n=Math.round(Math.random()*1.25*10);var r=s[Math.round(Math.random()*s.length)];var o=Math.round(Math.random()*5)+1;var u=new Filler(0,t,n,r,o,0);i.push(u)}else if(e===1){var a=Math.round(Math.random()*winwidth);var n=Math.round(Math.random()*1.25*10);var r=s[Math.round(Math.random()*s.length)];var o=Math.round(Math.random()*5)+1;var u=new Filler(a,0,n,r,0,o);i.push(u)}else if(e===2){var t=Math.round(Math.random()*winheight);var n=Math.round(Math.random()*1.25*10);var r=s[Math.round(Math.random()*s.length)];var o=Math.round(Math.random()*5)+1;var u=new Filler(winwidth,t,n,r,o*-1,0);i.push(u)}else if(e===3){var a=Math.round(Math.random()*winwidth);var n=Math.round(Math.random()*1.25*10);var r=s[Math.round(Math.random()*s.length)];var o=Math.round(Math.random()*5)+1;var u=new Filler(a,0,n,r,0,o*-1);i.push(u)}};var u=function(){var e=Date.now();var t=e-c;a(t/1e3);l();c=e;requestAnimationFrame(u)};var a=function(e){i.forEach(function(n){n.update(e,t,i)});if(i.length<=enemycap){o(Math.round(Math.random()*4))}};var f=function(){n.clearRect(0,0,t.width,t.height)};var l=function(){f();i.forEach(function(e){e.draw(n)});n.font="30pt Arial";n.fillStyle="white";n.textAlign="center";n.fillText("Ball Simulator 2015",winwidth/2,50);r.forEach(function(e){n.fillStyle=e.color;n.fillRect(e.left,e.top,e.width,e.height)});n.fillStyle="black";n.fillText("Start",winwidth/2,winheight/2+100)};var c=Date.now();u()}function initGame(){var e=document.createElement("canvas");e.id="game";document.body.appendChild(e);var t=document.getElementById("game");var n=t.getContext("2d");currentcanvas="game";t.width=winwidth;t.height=winheight;score=0;var r=[];var i=["#2ecc71","#1abc9c","#f39c12","#34495e","#f1c40f","#7f8c8d","#e67e22","#3498db"];var s=new Player(winwidth/2,winheight/2,r);var o=function(e){if(e===0){var t=Math.round(Math.random()*winheight);var n=Math.round(Math.random()*1.25*s.radius);var o=i[Math.round(Math.random()*i.length)];var u=Math.round(Math.random()*4)+1;var a=new Ball(1,t,n,o,u,0,s);r.push(a)}else if(e===1){var f=Math.round(Math.random()*winwidth);var n=Math.round(Math.random()*1.25*s.radius);var o=i[Math.round(Math.random()*i.length)];var u=Math.round(Math.random()*4)+1;var a=new Ball(f,1,n,o,0,u,s);r.push(a)}else if(e===2){var t=Math.round(Math.random()*winheight);var n=Math.round(Math.random()*1.25*s.radius);var o=i[Math.round(Math.random()*i.length)];var u=Math.round(Math.random()*4)+1;var a=new Ball(winwidth-1,t,n,o,u*-1,0,s);r.push(a)}else if(e===3){var f=Math.round(Math.random()*winwidth);var n=Math.round(Math.random()*1.25*s.radius);var o=i[Math.round(Math.random()*i.length)];var u=Math.round(Math.random()*4)+1;var a=new Ball(f,winheight-1,n,o,0,u*-1,s);r.push(a)}};window.addEventListener("keydown",function(e){keysDown[e.keyCode]=true},false);window.addEventListener("keyup",function(e){delete keysDown[e.keyCode]},false);var u=function(){var e=Date.now();var t=e-h;if(!gameOver){a(t/1e3);l()}else{c()}h=e;requestAnimationFrame(u)};var a=function(e){r.forEach(function(n){n.update(e,t,r)});s.update(e,t);if(r.length<=enemycap){o(Math.round(Math.random()*4))}};var f=function(){n.clearRect(0,0,t.width,t.height)};var l=function(){f();r.forEach(function(e){e.draw(n)});s.draw(n);n.font="20pt Arial";n.fillStyle="white";n.textAlign="center";n.fillText(score,winwidth/2,30);if((Date.now()-p)/1e3<=10&&firstload){n.font="20pt Arial";n.fillStyle="white";n.textAlign="left";n.fillText("WASD to move",10,40);n.fillText("Eat the smaller circles",10,65);n.fillText("Avoid the larger ones",10,90)}};var c=function(){f();n.font="100pt Impact";n.fillStyle="red";n.textAlign="center";n.fillText("Game Over!",winwidth/2,winheight/2);n.font="75pt Impact";n.fillStyle="white";n.textAlign="center";n.fillText("Your score was "+score,winwidth/2,winheight/2+100);n.fillStyle="green";n.fillRect(t.width/2-100,t.height-150,200,75);n.fillStyle="black";n.font="30pt Arial";n.textAlign="center";n.fillText("Replay",winwidth/2,winheight-100)};t.addEventListener("click",function(i){var o=t.offsetLeft;var u=t.offsetTop;var a=i.pageX-o;var f=i.pageY-u;if(f>t.height-150&&f<t.height-150+75&&a>t.width/2-100&&a<t.width/2-100+200&&gameOver){gameOver=false;score=0;r.forEach(function(e){e.alive=false;e.x=0;e.y=0;e.vx=0;e.vy=0});r.length=0;s.radius=10;n.clearRect(0,0,t.width,t.height);document.body.removeChild(e);firstload=false;h=Date.now();initGame()}},false);var h=Date.now();var p=Date.now();u()}function resize(){if(currentcanvas==="menu"){initMenu()}else if(currentcanvas==="game"){initGame()}}var music=new Audio("assets/sounds/background.wav");music.volume=.5;music.addEventListener("ended",function(){this.currentTime=0;this.play()},false);music.play();var winwidth=document.documentElement.clientWidth;var winheight=document.documentElement.clientHeight;var clientarea=winwidth*winheight;var screenarea=2073600;var screenscale=clientarea/screenarea;var currentcanvas;var keysDown={};var gameOver=false;var score=0;var enemycap=Math.floor(50*screenscale);var firstload=true;Filler=function(e,t,n,r,i,s){this.x=e;this.y=t;this.radius=n;this.color=r;this.vx=i;this.vy=s;this.alive=true};Filler.prototype.update=function(e,t,n){if(this.alive){this.x+=this.vx;this.y+=this.vy;if(this.x<0-this.radius||this.x>winwidth+this.radius||this.y<0-this.radius||this.y>winheight+this.radius){this.alive=false;var r=n.indexOf(this);n.splice(r,1)}}};Filler.prototype.draw=function(e){if(this.alive){e.beginPath();e.arc(this.x,this.y,this.radius,0,2*Math.PI,false);e.fillStyle=this.color;e.fill()}};Ball=function(e,t,n,r,i,s,o){this.x=e;this.y=t;this.radius=n;this.color=r;this.vx=i;this.vy=s;this.alive=true;this.target=o};Ball.prototype.update=function(e,t,n){if(this.alive){this.x+=this.vx;this.y+=this.vy;if(this.x<0||this.x>winwidth||this.y<0||this.y>winheight){this.alive=false;var r=n.indexOf(this);n.splice(r,1)}if(this.alive&&this.radius<this.target.radius&&collision(this,this.target)){console.log("Alive: "+this.alive+". Ball velocity: ("+this.vx+", "+this.vy+").");this.alive=false;this.target.radius=Math.round(this.target.radius+this.radius*.25);this.target.color=this.color;score+=Math.round(this.radius*5);var r=this.target.enemies.indexOf(this);this.target.enemies.splice(r,1);var i=new Audio("assets/sounds/kill.wav");i.play()}else if(this.alive&&this.radius>=this.target.radius&&collision(this,this.target)){console.log("Alive: "+this.alive+". Ball velocity: ("+this.vx+", "+this.vy+").");this.target.alive=false;this.alive=false;var r=this.target.enemies.indexOf(this);this.target.enemies.splice(r,1);gameOver=true;var i=new Audio("assets/sounds/death.wav");i.play()}if(!this.alive){var r=this.target.enemies.indexOf(this);this.target.enemies.splice(r,1)}}};Ball.prototype.draw=function(e){if(this.alive){e.beginPath();e.arc(this.x,this.y,this.radius,0,2*Math.PI,false);e.fillStyle=this.color;e.fill()}};Player=function(e,t,n){this.x=e;this.y=t;this.radius=10;this.color="white";this.speed=250;this.enemies=n;this.alive=true};Player.prototype.update=function(e,t){if(this.alive){if(65 in keysDown){if(this.x>0){this.x-=this.speed*e}}if(87 in keysDown){if(this.y>0){this.y-=this.speed*e}}if(68 in keysDown){if(this.x<t.width-this.radius){this.x+=this.speed*e}}if(83 in keysDown){if(this.y<t.height-this.radius){this.y+=this.speed*e}}}};Player.prototype.draw=function(e){if(this.alive){e.beginPath();e.arc(this.x,this.y,this.radius,0,2*Math.PI,false);e.fillStyle=this.color;e.fill()}}</script></head><body onload="initMenu()" onresize="resize()" onorientationchange="resize()" style="margin: 0;padding: 0;background-color: black;overflow: hidden;"></body></html>